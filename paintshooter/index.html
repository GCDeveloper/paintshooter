<html><head><title>Paint!</title><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><style>*{margin:0;padding:0}canvas{width:100%;height:100%;position:fixed;left:0;top:0}</style></head><body><section><canvas id="canvB"></canvas><canvas id="canvA"></canvas></section><script>!function(t,e){null==t&&(t=e("canvas").Context2d),null==t.prototype.ellipse&&(t.prototype.ellipse=function(t,e,n,o,a,i,r,c){this.save(),this.translate(t,e),this.rotate(a),this.scale(n,o),this.arc(0,0,1,i,r,c),this.restore()})}("undefined"==typeof CanvasRenderingContext2D?void 0:CanvasRenderingContext2D,"undefined"==typeof require?void 0:require);var canvasA=document.getElementById("canvA"),ctxA=canvasA.getContext("2d"),canvasB=document.getElementById("canvB"),ctxB=canvasB.getContext("2d");function randomRGB(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}function randomRange(t,e){return Math.random()*t*2-t+(e||0)}window.addEventListener("resize",onResize);var width=window.innerWidth,height=window.innerHeight,bgColour="black",localData={bgColour:localStorage.getItem("paint_bgColour")};function onResize(){width=window.innerWidth,height=window.innerHeight,canvasA.width=width,canvasA.height=height,canvasB.width=width,canvasB.height=height,ctxB.fillStyle=bgColour,ctxB.fillRect(0,0,width,height)}null!=localData.bgColour&&(bgColour="black"===(bgColour=localData.bgColour)?"white":"white"===bgColour?"black":randomRGB()),localStorage.setItem("paint_bgColour",bgColour),window.onload=function(){var e=!0,u={x:0,y:0,a:0,xv:0,yv:0,acc:.3,maxV:3,accMultiplier:1},o=[],n={x:null,y:null,isDown:!1};function t(t){t.touches&&1<=t.touches.length?(n.x=t.touches[0].pageX-width/2,n.y=t.touches[0].pageY-height/2):(n.x=t.pageX-width/2,n.y=t.pageY-height/2),n.isDown=!0}function a(){n.isDown=!1}function i(t){t.touches&&1<=t.touches.length?(n.x=t.touches[0].pageX-width/2,n.y=t.touches[0].pageY-height/2):(n.x=t.pageX-width/2,n.y=t.pageY-height/2)}function w(t,e,n,o){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2))}window.addEventListener("mousedown",t),window.addEventListener("mouseup",a),window.addEventListener("mousemove",i),window.addEventListener("touchstart",t),window.addEventListener("touchend",a),window.addEventListener("touchmove",i);var y=[];var r=[];function c(t,e){e(38===t||87===t?"up":40===t||83===t?"down":37===t||65===t?"left":39===t||68===t?"right":"none")}document.onkeydown=function(t){c((t=t||window.event).keyCode,function(t){-1==r.indexOf(t)&&r.push(t)})},document.onkeyup=function(t){c((t=t||window.event).keyCode,function(t){var e=r.indexOf(t);-1!=e&&r.splice(e,1)})};var h=0;function p(t,e,n,o){var a=Math.random()*(e-t)+t,i=Math.random()*o;return a*(1-i)+n*i}!function(){onResize(),u.x=width*u.x,u.y=height*u.y;var t,e,n,o=0,a=0,i=Math.floor(width),r=Math.floor(height),c=0,h=0,l=0,d=0,s=0;for(o=0;o<i;o++)for(y[o]=[],a=0;a<r;a++)l=w(.5,0,c=o/i,h=a/r),d=w(0,.75,c,h),s=w(1,.75,c,h),y[o][a]=(t=l,e=d,n=s,"rgb("+Math.floor(256*t)+","+Math.floor(256*e)+","+Math.floor(256*n)+")")}(),function t(){e&&(h++,function(){if(r.forEach(function(t){switch(t){case"none":break;case"left":u.xv-=u.acc*u.accMultiplier;break;case"up":u.yv-=u.acc*u.accMultiplier;break;case"right":u.xv+=u.acc*u.accMultiplier;break;case"down":u.yv+=u.acc*u.accMultiplier;break;default:console.warn("error in update, keydown unknown:",r)}}),(-(u.accMultiplier=1)!=r.indexOf("left")||-1!=r.indexOf("right"))&&(-1==r.indexOf("up")&&-1==r.indexOf("down")||(u.accMultiplier=.66)),0!==u.xv&&(u.x+=u.xv,u.xv*=.9),0!==u.yv&&(u.y+=u.yv,u.yv*=.9),n.isDown&&h%2==0){var t=randomRange(Math.PI),e=6*Math.random();t=Math.atan2(n.y+Math.sin(t)*e-u.y,n.x+Math.cos(t)*e-u.x),e=Math.sqrt(Math.pow(n.x-u.x,2)+Math.pow(n.y-u.y,2)),e*=(p(.25,1.75,1,1)+p(.25,1.75,1,1))/2,o=o.concat(function(t,e,n,o,a,i,r,c){var h,l,d,s,u,w,x,g,f,m,M=0,v=[];for(M=0;M<t;M++)v.push((h=e,l=n,d=o,s=a,u=i,w=r||randomRange(Math.PI),x=c,g=void 0,g=y[Math.floor(d+width/2)],f=w+randomRange(Math.PI/(4*Math.random()+1)),m=p(u/2,4*u,u,1),void 0!==g&&(g=g[Math.floor(s+height/2)]),g=g||randomRGB(),{x:h,y:l,sx:h,sy:l,tx:d+Math.cos(f)*m,ty:s+Math.sin(f)*m,size:Math.random()*(.8*u)+.2*u,colour:x||g,hitFloor:!1}));return v}(Math.ceil(8*Math.random()),u.x,u.y,u.x+Math.cos(t)*e,u.y+Math.sin(t)*e,3*Math.random(),t))}o.forEach(function(t){var e=Math.atan2(t.ty-t.sy,t.tx-t.sx),n=Math.random()+8,o=Math.sqrt(Math.pow(t.x-t.tx,2)+Math.pow(t.y-t.ty,2));t.x+=Math.cos(e)*n,t.y+=Math.sin(e)*n,o<=n&&(t.hitFloor=!0,t.size=t.size)})}(),ctxA.clearRect(0,0,width,height),ctxA.translate(width/2,height/2),ctxB.translate(width/2,height/2),0===Math.floor(4*Math.random())?ctxB.globalCompositeOperation="source-over":ctxB.globalCompositeOperation="hard-light",o.forEach(function(t,e){if(t.hitFloor){var n=Math.atan2(t.ty-t.sy,t.tx-t.sx);ctxB.beginPath(),ctxB.moveTo(t.tx,t.ty),ctxB.ellipse(t.tx,t.ty,t.size*(Math.random()+1),t.size*(.25*Math.random()+.75),n,0,2*Math.PI),ctxB.fillStyle=t.colour,ctxB.fill(),ctxB.closePath(),o.splice(e,1)}else ctxA.beginPath(),ctxA.moveTo(t.x,t.y),ctxA.arc(t.x,t.y,t.size,0,2*Math.PI),ctxA.fillStyle=t.colour,ctxA.fill(),ctxA.closePath()}),ctxA.beginPath(),ctxA.moveTo(u.x,u.y),ctxA.arc(u.x,u.y,10,0,2*Math.PI),ctxA.strokeStyle="rgb(0,0,0)",ctxA.stroke(),ctxA.fillStyle="rgb(255,255,255)",ctxA.fill(),ctxA.closePath(),ctxA.translate(-width/2,-height/2),ctxB.translate(-width/2,-height/2),requestAnimationFrame(t))}()},function(){for(var i=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),o=Math.max(0,16-(n-i)),a=window.setTimeout(function(){t(n+o)},o);return i=n+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()</script></body></html>