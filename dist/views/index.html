<html><head><title>Paint!</title><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><style>*{margin:0;padding:0}canvas{width:100%;height:100%;position:fixed;left:0;top:0}</style></head><body><section><canvas id="canvB"></canvas><canvas id="canvA"></canvas></section><script>!function(t,n){null==t&&(t=n("canvas").Context2d),null==t.prototype.ellipse&&(t.prototype.ellipse=function(t,n,a,o,e,i,r,c){this.save(),this.translate(t,n),this.rotate(e),this.scale(a,o),this.arc(0,0,1,i,r,c),this.restore()})}("undefined"==typeof CanvasRenderingContext2D?void 0:CanvasRenderingContext2D,"undefined"==typeof require?void 0:require);var canvasA=document.getElementById("canvA"),ctxA=canvasA.getContext("2d"),canvasB=document.getElementById("canvB"),ctxB=canvasB.getContext("2d");function randomRGB(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}function randomRange(t,n){return Math.random()*t*2-t+(n||0)}window.addEventListener("resize",onResize);var width=window.innerWidth,height=window.innerHeight,bgColour="black",localData={bgColour:localStorage.getItem("paint_bgColour")};function onResize(){width=window.innerWidth,height=window.innerHeight,canvasA.width=width,canvasA.height=height,canvasB.width=width,canvasB.height=height,ctxB.fillStyle=bgColour,ctxB.fillRect(0,0,width,height)}null!=localData.bgColour&&(bgColour="black"===(bgColour=localData.bgColour)?"white":"white"===bgColour?"black":randomRGB()),localStorage.setItem("paint_bgColour",bgColour),window.onload=function(){var n=!0,u={x:0,y:0,a:0,xv:0,yv:0,acc:.3,maxV:3,accMultiplier:1},o=[],a={x:null,y:null,isDown:!1};function w(t,n,a,o){return Math.sqrt(Math.pow(t-a,2)+Math.pow(n-o,2))}window.addEventListener("mousedown",function(t){a.x=t.pageX-width/2,a.y=t.pageY-height/2,a.isDown=!0}),window.addEventListener("mouseup",function(){a.isDown=!1}),window.addEventListener("mousemove",function(t){a.x=t.pageX-width/2,a.y=t.pageY-height/2});var y=[];var e=[];function i(t,n){n(38===t||87===t?"up":40===t||83===t?"down":37===t||65===t?"left":39===t||68===t?"right":"none")}document.onkeydown=function(t){i((t=t||window.event).keyCode,function(t){-1==e.indexOf(t)&&e.push(t)})},document.onkeyup=function(t){i((t=t||window.event).keyCode,function(t){var n=e.indexOf(t);-1!=n&&e.splice(n,1)})};var r=0;function p(t,n,a,o){var e=Math.random()*(n-t)+t,i=Math.random()*o;return e*(1-i)+a*i}!function(){onResize(),u.x=width*u.x,u.y=height*u.y;var t,n,a,o=0,e=0,i=Math.floor(width),r=Math.floor(height),c=0,h=0,l=0,d=0,s=0;for(o=0;o<i;o++)for(y[o]=[],e=0;e<r;e++)l=w(.5,0,c=o/i,h=e/r),d=w(0,.75,c,h),s=w(1,.75,c,h),y[o][e]=(t=l,n=d,a=s,"rgb("+Math.floor(256*t)+","+Math.floor(256*n)+","+Math.floor(256*a)+")")}(),function t(){n&&(r++,function(){if(e.forEach(function(t){switch(t){case"none":break;case"left":u.xv-=u.acc*u.accMultiplier;break;case"up":u.yv-=u.acc*u.accMultiplier;break;case"right":u.xv+=u.acc*u.accMultiplier;break;case"down":u.yv+=u.acc*u.accMultiplier;break;default:console.warn("error in update, keydown unknown:",e)}}),(-(u.accMultiplier=1)!=e.indexOf("left")||-1!=e.indexOf("right"))&&(-1==e.indexOf("up")&&-1==e.indexOf("down")||(u.accMultiplier=.66)),0!==u.xv&&(u.x+=u.xv,u.xv*=.9),0!==u.yv&&(u.y+=u.yv,u.yv*=.9),a.isDown&&r%2==0){var t=randomRange(Math.PI),n=6*Math.random();t=Math.atan2(a.y+Math.sin(t)*n-u.y,a.x+Math.cos(t)*n-u.x),n=Math.sqrt(Math.pow(a.x-u.x,2)+Math.pow(a.y-u.y,2)),n*=(p(.25,1.75,1,1)+p(.25,1.75,1,1))/2,o=o.concat(function(t,n,a,o,e,i,r,c){var h,l,d,s,u,w,x,f,m,g,M=0,v=[];for(M=0;M<t;M++)v.push((h=n,l=a,d=o,s=e,u=i,w=r||randomRange(Math.PI),x=c,f=void 0,f=y[Math.floor(d+width/2)],m=w+randomRange(Math.PI/(4*Math.random()+1)),g=p(u/2,4*u,u,1),void 0!==f&&(f=f[Math.floor(s+height/2)]),f=f||randomRGB(),{x:h,y:l,sx:h,sy:l,tx:d+Math.cos(m)*g,ty:s+Math.sin(m)*g,size:Math.random()*(.8*u)+.2*u,colour:x||f,hitFloor:!1}));return v}(Math.ceil(8*Math.random()),u.x,u.y,u.x+Math.cos(t)*n,u.y+Math.sin(t)*n,3*Math.random(),t))}o.forEach(function(t){var n=Math.atan2(t.ty-t.sy,t.tx-t.sx),a=Math.random()+8,o=Math.sqrt(Math.pow(t.x-t.tx,2)+Math.pow(t.y-t.ty,2));t.x+=Math.cos(n)*a,t.y+=Math.sin(n)*a,o<=a&&(t.hitFloor=!0,t.size=t.size)})}(),ctxA.clearRect(0,0,width,height),ctxA.translate(width/2,height/2),ctxB.translate(width/2,height/2),0===Math.floor(4*Math.random())?ctxB.globalCompositeOperation="source-over":ctxB.globalCompositeOperation="hard-light",o.forEach(function(t,n){if(t.hitFloor){var a=Math.atan2(t.ty-t.sy,t.tx-t.sx);ctxB.beginPath(),ctxB.moveTo(t.tx,t.ty),ctxB.ellipse(t.tx,t.ty,t.size*(Math.random()+1),t.size*(.25*Math.random()+.75),a,0,2*Math.PI),ctxB.fillStyle=t.colour,ctxB.fill(),ctxB.closePath(),o.splice(n,1)}else ctxA.beginPath(),ctxA.moveTo(t.x,t.y),ctxA.arc(t.x,t.y,t.size,0,2*Math.PI),ctxA.fillStyle=t.colour,ctxA.fill(),ctxA.closePath()}),ctxA.beginPath(),ctxA.moveTo(u.x,u.y),ctxA.arc(u.x,u.y,10,0,2*Math.PI),ctxA.strokeStyle="rgb(0,0,0)",ctxA.stroke(),ctxA.fillStyle="rgb(255,255,255)",ctxA.fill(),ctxA.closePath(),ctxA.translate(-width/2,-height/2),ctxB.translate(-width/2,-height/2),requestAnimationFrame(t))}()},function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var a=(new Date).getTime(),o=Math.max(0,16-(a-i)),e=window.setTimeout(function(){t(a+o)},o);return i=a+o,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()</script></body></html>